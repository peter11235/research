package drumset2;

public class DrumPlayer extends MidiPlayer {

	private final static int DRUM_DURATION = 100;
	
	public DrumPlayer(DrumController aDrumController)
	{
		super();
	}
	
public void playSound(final int note, final int channel) {
		
		new Thread(new Runnable() {
			@Override
			public void run() {
				if (note >= 35 && note <= 81) {
					
					if (lastNote != note) {
						channels[channel].noteOn(note, VELOCITY);
						lastNote = note;
						
						try {
							Thread.sleep(DRUM_DURATION);
						} catch (InterruptedException e) {

							e.printStackTrace();
						}
						
					}
				} else {
					soundOff(channel);
					
				}
				
			}
			
		}).start();
		
	}

	public void soundOff(int channel) {

		channels[channel].noteOff(lastNote);
		channels[channel].allNotesOff();
		channels[channel].allSoundOff();
		lastNote = -1;
	}

}
